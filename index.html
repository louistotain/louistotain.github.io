<!DOCTYPE html>
<html lang="en">
<head>
    <title>Louis TOTAIN | Portfolio</title>
    <meta charset="utf-8">
    <meta name="generator" content="Three.js Editor">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/app.css" id="css-link">
    <link rel="shortcut icon" href="/img/cloud.svg" type="image/svg">

    <!--  Await fonts  -->
    <link rel="preload" href="/fonts/Bungee-Regular.ttf" as="font" type="font/ttf" crossorigin>

</head>
<body ontouchstart="" id="body">
 <div id="cursor"></div>

<div style="width: 100%; height: 100%;">
    <div style="width: 100%; height: 50px; display: flex; justify-content: center">
        <div style="display: flex; align-items: center">
            <span></span>
        </div>
        <div style="display: flex; align-items: center">
            <span id="logo">LOUIS TOTAIN</span>
        </div>
        <div style="display: flex; align-items: center">
            <span></span>
        </div>
    </div>
    <div id="content" style="width: 100%; height: calc(100% - 50px); border-radius: .5em; display: flex">
        <div id="model" style="width: 50%; height: 100%; position: relative;">
            <div id="background-3d" style="position: absolute; z-index: 0; width: 70%; display: flex; justify-content: center; align-items: center; top: 58%; left: 45%; transform: translate(-50%, -50%);">
                <svg width="722" height="621" viewBox="0 0 722 621" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g filter="url(#filter0_d_530_3)">
                        <path d="M722 382.863C722 596.291 602.66 617 389.091 617C175.522 617 0 460.706 0 247.278C0 33.8496 139.661 0 353.23 0C566.799 0 722 169.434 722 382.863Z" fill="url(#paint0_linear_530_3)"/>
                    </g>
                    <defs>
                        <filter id="filter0_d_530_3" x="0" y="0" width="722" height="621" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                            <feOffset dy="4"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0.945833 0 0 0 0 0.874738 0 0 0 0 0.784253 0 0 0 1 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_530_3"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_530_3" result="shape"/>
                        </filter>
                        <linearGradient id="paint0_linear_530_3" x1="722" y1="0" x2="-8.3993e-06" y2="617" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#FDFDFD"/>
                            <stop offset="1" stop-color="white"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div id="3d-content" style="position: absolute; z-index: 1; width: 100%; height: 100%;"></div>
        </div>
        <div id="title" style="width: 50%">
            <div>
                <div>
                    <h1>WELCOME TO</h1>
                    <h1>MY PORTFOLIO</h1>
                    <h1>WEBSITE !</h1>
                </div>
            </div>
            <div>
                <div>
                    <h3>LET'S GO ON AN ADVENTURE</h3>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var cursor = document.getElementById("cursor");
    var cursorDefault = document.getElementById("cursor-default");
    var isAnimating = false;

    // document.addEventListener("mousemove", function (event) {
    //     var x = event.clientX;
    //     var y = event.clientY;
    //
    //     cursor.style.left = x - 12 + "px";
    //     cursor.style.top = y - 12 + "px";
    //
    //     cursorDefault.style.left = x + "px";
    //     cursorDefault.style.top = y + "px";
    // });

    document.addEventListener("click", function (event) {
        if (isAnimating) {
            return; // Empêche l'animation si elle est déjà en cours
        }

        isAnimating = true;

        // Ajout d'une classe pour déclencher l'animation de frappe
        cursor.classList.add("strike");

        setTimeout(function () {
            cursor.classList.remove("strike");
            isAnimating = false;
        }, 150);
    });
</script>

<script type="module">

    import * as THREE from './js/three.module.js';
    import {APP} from './js/app.js';
    import {VRButton} from './js/VRButton.js';

    window.THREE = THREE; // Used by APP Scripts.
    window.VRButton = VRButton; // Used by APP Scripts.

    var loader = new THREE.FileLoader();
    loader.load('3d/app_good4.json', function (text) {

        var player = new APP.Player();
        player.load(JSON.parse(text));

        player.setSize(document.getElementById('3d-content').offsetWidth, document.getElementById('3d-content').offsetHeight);
        player.play();

        document.getElementById('3d-content').appendChild(player.dom);

        window.addEventListener('resize', function () {
            player.setSize(document.getElementById('3d-content').offsetWidth, document.getElementById('3d-content').offsetHeight);
        });

    });

</script>

<script>

    // Add auto refresh cache imports js
    var cssLink = document.getElementById('css-link');
    var timestamp = new Date().toISOString().replace(/[-:.]/g, '');
    cssLink.href = "css/app.css?" + timestamp;

    var scriptElements = document.querySelectorAll('script[type="module"]');

    scriptElements.forEach(function (script) {
        var src = script.src;
        if (src.includes('.js')) {
            var updatedSrc = src + "?" + timestamp;
            script.src = updatedSrc;
        }
    });

</script>
</body>
</html>
